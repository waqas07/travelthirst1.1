!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){function corslite(url,callback,cors){function isSuccessful(status){return status>=200&&status<300||304===status}function loaded(){void 0===x.status||isSuccessful(x.status)?callback.call(x,null,x):callback.call(x,x,null)}var sent=!1;if(void 0===window.XMLHttpRequest)return callback(Error("Browser not supported"));if(void 0===cors){var m=url.match(/^\s*https?:\/\/[^\/]*/);cors=m&&m[0]!==location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")}var x=new window.XMLHttpRequest;if(cors&&!("withCredentials"in x)){x=new window.XDomainRequest;var original=callback;callback=function(){if(sent)original.apply(this,arguments);else{var that=this,args=arguments;setTimeout(function(){original.apply(that,args)},0)}}}return"onload"in x?x.onload=loaded:x.onreadystatechange=function(){4===x.readyState&&loaded()},x.onerror=function(evt){callback.call(this,evt||!0,null),callback=function(){}},x.onprogress=function(){},x.ontimeout=function(evt){callback.call(this,evt,null),callback=function(){}},x.onabort=function(evt){callback.call(this,evt,null),callback=function(){}},x.open("GET",url,!0),x.send(null),sent=!0,x}void 0!==module&&(module.exports=corslite)},{}],2:[function(require,module,exports){"use strict";function py2_round(value){return Math.floor(Math.abs(value)+.5)*Math.sign(value)}function encode(current,previous,factor){current=py2_round(current*factor),previous=py2_round(previous*factor);var coordinate=current-previous;coordinate<<=1,current-previous<0&&(coordinate=~coordinate);for(var output="";coordinate>=32;)output+=String.fromCharCode(63+(32|31&coordinate)),coordinate>>=5;return output+=String.fromCharCode(coordinate+63)}function flipped(coords){for(var flipped=[],i=0;i<coords.length;i++)flipped.push(coords[i].slice().reverse());return flipped}var polyline={};polyline.decode=function(str,precision){for(var latitude_change,longitude_change,index=0,lat=0,lng=0,coordinates=[],shift=0,result=0,byte=null,factor=Math.pow(10,precision||5);index<str.length;){byte=null,shift=0,result=0;do{byte=str.charCodeAt(index++)-63,result|=(31&byte)<<shift,shift+=5}while(byte>=32);latitude_change=1&result?~(result>>1):result>>1,shift=result=0;do{byte=str.charCodeAt(index++)-63,result|=(31&byte)<<shift,shift+=5}while(byte>=32);longitude_change=1&result?~(result>>1):result>>1,lat+=latitude_change,lng+=longitude_change,coordinates.push([lat/factor,lng/factor])}return coordinates},polyline.encode=function(coordinates,precision){if(!coordinates.length)return"";for(var factor=Math.pow(10,precision||5),output=encode(coordinates[0][0],0,factor)+encode(coordinates[0][1],0,factor),i=1;i<coordinates.length;i++){var a=coordinates[i],b=coordinates[i-1];output+=encode(a[0],b[0],factor),output+=encode(a[1],b[1],factor)}return output},polyline.fromGeoJSON=function(geojson,precision){if(geojson&&"Feature"===geojson.type&&(geojson=geojson.geometry),!geojson||"LineString"!==geojson.type)throw new Error("Input must be a GeoJSON LineString");return polyline.encode(flipped(geojson.coordinates),precision)},polyline.toGeoJSON=function(str,precision){return{type:"LineString",coordinates:flipped(polyline.decode(str,precision))}},"object"==typeof module&&module.exports&&(module.exports=polyline)},{}],3:[function(require,module,exports){(function(global){var L="undefined"!=typeof window?window.L:void 0!==global?global.L:null,MapzenRouter=require("./mapzenRouter"),MapzenLine=require("./mapzenLine"),MapzenFormatter=require("./mapzenFormatter");L.Routing=L.Routing||{},L.routing=L.routing||{},L.Routing.Mapzen=MapzenRouter,L.Routing.MapzenLine=MapzenLine,L.Routing.MapzenFormatter=MapzenFormatter,L.routing.mapzen=function(e,n){return new MapzenRouter(e,n)},L.routing.mapzenLine=function(e,n){return new MapzenLine(e,n)},L.routing.mapzenFormatter=function(e){return new MapzenFormatter(e)},L.Routing.mapzen=L.routing.mapzen,L.Routing.mapzenLine=L.routing.mapzenLine,L.Routing.mapzenFormatter=L.routing.mapzenFormatter}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./mapzenFormatter":4,"./mapzenLine":5,"./mapzenRouter":6}],4:[function(require,module,exports){(function(global){!function(){"use strict";var t="undefined"!=typeof window?window.L:void 0!==global?global.L:null;module.exports=t.Class.extend({options:{units:"metric",unitNames:{meters:"m",kilometers:"km",yards:"yd",miles:"mi",hours:"h",minutes:"mÃ­n",seconds:"s"},language:"en",roundingSensitivity:1,distanceTemplate:"{value} {unit}"},initialize:function(e){t.setOptions(this,e)},formatDistance:function(e){var r,n,a=this.options.unitNames;return"imperial"===this.options.units?(e*=1e3,e/=1.609344,n=e>=1e3?{value:this._round(e)/1e3,unit:a.miles}:{value:this._round(e/1.76),unit:a.yards}):(r=e,n={value:r>=1?r:1e3*r,unit:r>=1?a.kilometers:a.meters}),t.Util.template(this.options.distanceTemplate,n)},_round:function(t){var e=Math.pow(10,(Math.floor(t/this.options.roundingSensitivity)+"").length-1),r=Math.floor(t/e),n=r>5?e:e/2;return Math.round(t/n)*n},formatTime:function(t){return t>86400?Math.round(t/3600)+" h":t>3600?Math.floor(t/3600)+" h "+Math.round(t%3600/60)+" min":t>300?Math.round(t/60)+" min":t>60?Math.floor(t/60)+" min"+(t%60!=0?" "+t%60+" s":""):t+" s"},formatInstruction:function(t,e){return t.instruction},getIconName:function(t,e){switch(t.type){case 0:return"kNone";case 1:return"kStart";case 2:return"kStartRight";case 3:return"kStartLeft";case 4:return"kDestination";case 5:return"kDestinationRight";case 6:return"kDestinationLeft";case 7:return"kBecomes";case 8:return"kContinue";case 9:return"kSlightRight";case 10:return"kRight";case 11:return"kSharpRight";case 12:return"kUturnRight";case 13:return"kUturnLeft";case 14:return"kSharpLeft";case 15:return"kLeft";case 16:return"kSlightLeft";case 17:return"kRampStraight";case 18:return"kRampRight";case 19:return"kRampLeft";case 20:return"kExitRight";case 21:return"kExitLeft";case 22:return"kStayStraight";case 23:return"kStayRight";case 24:return"kStayLeft";case 25:return"kMerge";case 26:return"kRoundaboutEnter";case 27:return"kRoundaboutExit";case 28:return"kFerryEnter";case 29:return"kFerryExit";case 30:case 31:case 32:case 33:case 34:case 35:case 36:return t.edited_travel_type?"kTransit"+this._getCapitalizedName(t.edited_travel_type):"kTransit"}},_getInstructionTemplate:function(t,e){return t.instruction+" "+t.length},_getCapitalizedName:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(require,module,exports){(function(global){!function(){"use strict";var t="undefined"!=typeof window?window.L:void 0!==global?global.L:null;module.exports=t.LayerGroup.extend({includes:t.Mixin.Events,options:{styles:[{color:"white",opacity:.8,weight:8},{color:"#06a6d4",opacity:1,weight:6}],missingRouteStyles:[{color:"black",opacity:.15,weight:8},{color:"white",opacity:.6,weight:6},{color:"gray",opacity:.8,weight:4,dashArray:"7,12"}],addWaypoints:!0,extendToWaypoints:!0,missingRouteTolerance:10},initialize:function(i,e){if(t.setOptions(this,e),t.LayerGroup.prototype.initialize.call(this,e),this._route=i,this.options.extendToWaypoints&&this._extendToWaypoints(),i.subRoutes)for(var o=0;o<i.subRoutes.length;o++)i.subRoutes[o].styles||(i.subRoutes[o].styles=this.options.styles),this._addSegment(i.subRoutes[o].coordinates,i.subRoutes[o].styles,this.options.addWaypoints);else this._addSegment(i.coordinates,this.options.styles,this.options.addWaypoints)},addTo:function(t){return t.addLayer(this),this},getBounds:function(){return t.latLngBounds(this._route.coordinates)},_findWaypointIndices:function(){var t,i=this._route.inputWaypoints,e=[];for(t=0;t<i.length;t++)e.push(this._findClosestRoutePoint(i[t].latLng));return e},_findClosestRoutePoint:function(t){var i,e,o,n=Number.MAX_VALUE;for(e=this._route.coordinates.length-1;e>=0;e--)(o=t.distanceTo(this._route.coordinates[e]))<n&&(i=e,n=o);return i},_extendToWaypoints:function(){var i,e,o,n=this._route.inputWaypoints,s=this._getWaypointIndices();for(i=0;i<n.length;i++)e=n[i].latLng,o=t.latLng(this._route.coordinates[s[i]]),e.distanceTo(o)>this.options.missingRouteTolerance&&this._addSegment([e,o],this.options.missingRouteStyles)},_addSegment:function(i,e,o){var n,s;for(n=0;n<e.length;n++)s=t.polyline(i,e[n]),this.addLayer(s),o&&s.on("mousedown",this._onLineTouched,this)},_findNearestWpBefore:function(t){for(var i=this._getWaypointIndices(),e=i.length-1;e>=0&&i[e]>t;)e--;return e},_onLineTouched:function(t){var i=this._findNearestWpBefore(this._findClosestRoutePoint(t.latlng));this.fire("linetouched",{afterIndex:i,latlng:t.latlng})},_getWaypointIndices:function(){return this._wpIndices||(this._wpIndices=this._route.waypointIndices||this._findWaypointIndices()),this._wpIndices}})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(require,module,exports){(function(global){!function(){"use strict";var t="undefined"!=typeof window?window.L:void 0!==global?global.L:null,e=require("@mapbox/corslite"),n=require("@mapbox/polyline"),i=require("./waypoint");module.exports=t.Class.extend({options:{timeout:3e4},initialize:function(e,n){t.Util.setOptions(this,n),this._accessToken=e,this._hints={locations:{}}},route:function(n,s,o,a){var r,l,u,h,p=!1,c=[],g={};for(g=this.options||{},r=this.buildRouteUrl(n,g),l=setTimeout(function(){p=!0,s.call(o||s,{status:-1,message:"Time out."})},this.options.timeout),h=0;h<n.length;h++)u=n[h],c.push(new i(t.latLng(u.latLng),u.name||"",u.options||{}));return e(r,t.bind(function(t,e){var n;clearTimeout(l),p||(t?(console.log("Error : "+t.response),s.call(o||s,{status:t.status,message:t.response})):(n=JSON.parse(e.responseText),this._routeDone(n,c,g,s,o)))},this),!0),this},_routeDone:function(e,i,s,o,a){var r,l,u,h;if(a=a||o,0!==e.trip.status)return void o.call(a,{status:e.status,message:e.status_message});for(var p=[],r=[],c=0,h=0;h<e.trip.legs.length;h++){for(var g=n.decode(e.trip.legs[h].shape,6),m=0;m<g.length;m++)r.push(t.latLng(g[m][0],g[m][1]));for(var v=0;v<e.trip.legs[h].maneuvers.length;v++){var _=e.trip.legs[h].maneuvers[v];_.distance=e.trip.legs[h].maneuvers[v].length,_.index=c+e.trip.legs[h].maneuvers[v].begin_shape_index,p.push(_)}"multimodal"===s.costing&&(p=this._unifyTransitManeuver(p)),c+=e.trip.legs[h].maneuvers[e.trip.legs[h].maneuvers.length-1].begin_shape_index}u=this._toWaypoints(i,e.trip.locations);var f;"multimodal"==s.costing&&(f=this._getSubRoutes(e.trip.legs)),l=[{name:this._trimLocationKey(i[0].latLng)+" , "+this._trimLocationKey(i[1].latLng),unit:e.trip.units,costing:s.costing,coordinates:r,subRoutes:f,instructions:p,summary:e.trip.summary?this._convertSummary(e.trip.summary):[],inputWaypoints:i,waypoints:u,waypointIndices:this._clampIndices([0,e.trip.legs[0].maneuvers.length],r)}],e.hint_data&&this._saveHintData(e.hint_data,i),o.call(a,null,l)},_unifyTransitManeuver:function(t){for(var e,n=t,i=0;i<n.length;i++)if(30==n[i].type){e=n[i].travel_type;break}for(var s=0;s<n.length;s++)n[s].type>29&&(n[s].edited_travel_type=e);return n},_getSubRoutes:function(t){for(var e=[],i=0;i<t.length;i++){for(var s,o=n.decode(t[i].shape,6),a=[],r=0;r<t[i].maneuvers.length;r++){var l=t[i].maneuvers[r],u=l.travel_type;u===s&&31!==l.type||(l.begin_shape_index>0&&a.push(l.begin_shape_index),l.transit_info?e.push({travel_type:u,styles:this._getPolylineColor(l.transit_info.color)}):e.push({travel_type:u})),s=u}a.push(o.length);for(var h=0,p=0;p<a.length;p++){var c=[],g=0;p!==a.length-1&&(g=1);for(var m=h;m<a[p]+g;m++)c.push(o[m]);var v=c;h=a[p],e[p].coordinates=v}}return e},_getPolylineColor:function(t){var e=t>>16&255,n=t>>8&255,i=t>>0&255,s=.299*e+.587*n+.114*i,o=s>187,a=16777216|16777215&t,r=a.toString(16).substring(1,7);return[o?{color:"#000",opacity:.8,weight:8}:{color:"#fff",opacity:.8,weight:8},{color:"#"+r.toUpperCase(),opacity:1,weight:6}]},_saveHintData:function(t,e){var n;this._hints={checksum:t.checksum,locations:{}};for(var i=t.locations.length-1;i>=0;i--)n=e[i].latLng,this._hints.locations[this._locationKey(n)]=t.locations[i]},_toWaypoints:function(e,n){var s,o=[];for(s=0;s<n.length;s++)o.push(new i(t.latLng([n[s].lat,n[s].lon]),"name",{}));return o},buildRouteUrl:function(e,n){for(var i,s=[],o=0;o<e.length;o++){var a;i=this._locationKey(e[o].latLng).split(","),a=0===o||o===e.length-1?{lat:parseFloat(i[0]),lon:parseFloat(i[1]),type:"break"}:{lat:parseFloat(i[0]),lon:parseFloat(i[1]),type:"through"},s.push(a)}var r=t.extend(n,{locations:s});return"https://valhalla.mapzen.com/route?json="+JSON.stringify(r)+"&api_key="+this._accessToken},_locationKey:function(t){return t.lat+","+t.lng},_trimLocationKey:function(t){return t.lat,t.lng,Math.floor(1e3*t.lat)/1e3+" , "+Math.floor(1e3*t.lng)/1e3},_convertSummary:function(t){return{totalDistance:t.length,totalTime:t.time}},_convertInstructions:function(t){var e,n,i,s,o=[];for(e=0;e<t.length;e++)n=t[e],i=this._drivingDirectionType(n[0]),s=n[0].split("-"),i&&o.push({type:i,distance:n[2],time:n[4],road:n[1],direction:n[6],exit:s.length>1?s[1]:void 0,index:n[3]});return o},_clampIndices:function(t,e){var n,i=e.length-1;for(n=0;n<t.length;n++)t[n]=Math.min(i,Math.max(t[n],0))}})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./waypoint":7,"@mapbox/corslite":1,"@mapbox/polyline":2}],7:[function(require,module,exports){(function(global){!function(){"use strict";var t="undefined"!=typeof window?window.L:void 0!==global?global.L:null;module.exports=t.Class.extend({options:{allowUTurn:!1},initialize:function(i,e,n){t.Util.setOptions(this,n),this.latLng=t.latLng(i),this.name=e}})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[3,4,5,6,7]);
